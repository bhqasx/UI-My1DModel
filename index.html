<!DOCTYPE html>
<html>
    <body>
        <input type="file" id="files" name="files[]" multiple />
        <div id ="showJson"></div>
        <script>
            function handleFileSelect(evt) {
              var files = evt.target.files; // FileList object
              //console.log(files[0].name);
              var reader = new FileReader();
              reader.onload = function(e) {
                // e.target.result should contain the text
                var myJson = JSON.parse(e.target.result);
                var allKeys = "";

                //有些浏览器不支持Array.isArray()，需要以下if语句生成它
                /*if (!Array.isArray) {
                    Array.isArray = function(arg) {
                    return Object.prototype.toString.call(arg) === '[object Array]';
                    };
                }
                */

                function getAllKeys(jObj) {
                    var s = "";
                    for (let prop in jObj) {
                        if (typeof jObj[prop] === 'object') {
                            if (Array.isArray(jObj[prop])) {
                                s += `${prop}<br>`;
                            } else {
                                s += getAllKeys(jObj[prop]);
                            };                           
                        } else {
                            s += `${prop}<br>`;
                        }       
                    }
                    return s;
                }
                allKeys = getAllKeys(myJson);
                //for (let prop in myJson) {
                //    if (typeof myJson[prop] === 'object') {
                //        allKeys+=`${prop}<br>` 
                //    }
                //};
                document.getElementById("showJson").innerHTML = allKeys;
                //console.log(e.target.result);
              };
              reader.readAsText(files[0]);
            }
          
            document.getElementById('files').addEventListener('change', handleFileSelect, false);
        </script>
    </body>
</html>